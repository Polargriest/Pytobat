// Start with an event
start: events+

// Define events
events: "event" EVENT_LIST ":" code_block
EVENT_LIST: "WHEN_SCENE_STARTS"
          | "WHEN_TAPPED"

// Code block containing multiple bricks without capturing empty lines
code_block: (brick)*

// Define what functions are
brick: func "(" args? ")"

// Function name rule
func: FUNC_NAME

// Function name must be alphanumeric
FUNC_NAME: /\w+/

// Allow nested expressions as arguments
args: expression ("," expression)*

// An expression can be a number, identifier, string, or nested function call
expression: func_call | NUMBER | IDENTIFIER | STRING

// Define a nested function call
func_call: func "(" args? ")"

// Numbers can be integers or floats
NUMBER: /\d+(\.\d+)?/

// Identifiers can be alphanumeric
IDENTIFIER: /\w+/

// Strings are enclosed in double quotes
STRING: ESCAPED_STRING

// Import and ignore whitespace and newlines
%import common.ESCAPED_STRING
%import common.NEWLINE
%import common.WS
%ignore WS
%ignore NEWLINE
